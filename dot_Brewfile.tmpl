{{- /* Brewfile generated from .chezmoidata/apps.yml using union and sortAlpha.
     This template expects .chezmoidata/apps.yaml to have:
       common:
         taps: []
         formulae: [...]
         casks: [...]
       work:
         taps: [...]
         formulae: [...]
         casks: [...]
       personal:
         taps: [...]
         formulae: [...]
         casks: [...]
*/ -}}
{{- if eq .chezmoi.os "darwin" }}
{{- $apps := .apps }}
{{- $section := (ternary $apps.work $apps.personal .local.is_work) }}
{{- $taps := list -}}
{{- range concat $apps.common.taps $section.taps -}}
{{- if hasKey . "url" -}}
    {{- $entry := printf "\"%s\", \"%s\"" .name .url -}}
    {{- $taps = append $taps $entry -}}
{{- else if hasKey . "name" -}}
    {{- $entry := printf "\"%s\"" .name -}}
    {{- $taps = append $taps $entry -}}
{{- else -}}
    {{- $entry := printf "\"%s\"" . -}}
    {{- $taps = append $taps $entry -}}
{{- end -}}
{{- end -}}
{{- range $taps | uniq | sortAlpha }}
tap {{ . }}
{{- end }}
{{- range concat $apps.common.formulae $section.formulae | uniq | sortAlpha }}
brew "{{ . }}"
{{- end }}
{{- range concat $apps.common.casks $section.casks | uniq | sortAlpha }}
cask "{{ . }}"
{{- end }}
{{- end }}
